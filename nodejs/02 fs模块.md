fs全称为file System，文件系统，是Node.js中 内置模块，可以对计算机中的磁盘进行操作。
# 1. 文件的写入

## 1.1 异步写入：writeFile

```js
// 1.引入fs模块
const fs = require('fs');
//2.调用writeFile(file, data[, options], callback)方法写入文件
fs.writeFile('./座右铭.txt','三人行，必有我师焉',err => {
    if(err){
        console.log('写入失败');
        return;
    }
    console.log('写入成功');
})

console（1+1）;
```

<mark style="background: #FFF3A3A6;">writeFile</mark>(file, data\[, options], callback)
* file 文件名
* data 待写入的数据
* options 选项设置（可选）
* callback 写入回调
返回值： undefined

writeFile 方法是异步的，也就是说，当执行此方法时，err 回调函数会是另一个线程执行，主线程继续执行下一步。此时结果
```shell
2
写入成功
```


## 1.2 同步写入：writeFileSync

跟1.1差不多，只不过这个是同步的，一行一行执行。
`fs.writeFileSync (file, data[, options])`
返回值： undefined
代码示例：
```js
let data = fs.readFileSync('./座右铭.txt');
let data2 = fs.readFileSync('./座右铭.txt', 'utf-8');
```
## 1.3 文件的追加写入

**appendFile / appendFileSync** 方法，跟上面写入的用法一样。作用是把文字追加到原文字的后面。
`fs.appendFile(file,data[,options],callback)`

`fs.appendFileSync(file,data[,options]`

返回值：都是 undefined

```js
fs.appendFile('./座右铭.txt','择其善者而从之，其不善者而改之。', err => {
if(err) throw err;
console.log('追加成功')
});
fs.appendFileSync('./座右铭.txt','\r\n温故而知新, 可以为师矣');
```


## 1.4 流式写入

**createWriteStream**
```js
//1.获取fs
const fs = require('fs'); 
//2.创建流对象
const ws = fs.createWriteStream('./观书有感.txt');
//3.调用write方法写入
ws.write('1111111\r\n');
ws.write('2222222\r\n');
ws.write('3333333\r\n');
//4.关闭流
ws.close();

观书有感.txt
1111111
2222222
3333333
```

>程序打开一个文件是需要消耗资源的，流式写入可以减少打开关闭文件的次数。
>流式写入方式适用于大文件写入或者频繁写入的场景, writeFile 适合于写入频率较低的场景

# 2.文件读取

| 方法             | 说明     |
| ---------------- | -------- |
| readFile         | 异步读取 |
| readFileSync     | 同步读取 |
| createReadStream | 流式读取 |

# 3.文件的移动与重命名

语法：
`fs.rename(oldPath, newPath, callback)` 
`fs.renameSync(oldPath, newPath) `
<mark style="background: #FF5582A6;">语法里凡是没有标 [ ] 的都是必填项!！</mark>
参数说明： 
*  oldPath 文件当前的路径
*  newPath 文件新的路径
*  callback 操作后的回调
# 4.路径与_dirname

## 4.1相对路径与绝对路径
* 相对路径
	* `./座右铭. txt` 当前目录下的座右铭. txt
	* `座右铭. txt` 等效于上面的写法
	* `../座右铭. txt` 当前目录的上一级目录中的座右铭. txt
* 绝对路径
	* `D:/Program Files` windows 系统下的绝对路径
	* `/usr/bin` Linux 系统下的绝对路径

## 4.2__dirname

`__dirname` 与 `require` 类似，都是 Node. js 环境中的'全局'变量
`__dirname` 保存着 `当前文件所在目录的绝对路径`，可以使用__dirname 与文件名拼接成绝对路径
# 5.习题
## 文件重命名

把序号为1234的改为01,02,03,04
```js
const fs = require('fs');
const files = fs.readdirSync('./code');
files.forEach(item => {
 const data = item.split('-');
 let[num,name]=data;
 if(Number(num)<10){
    num='0'+num
 }
 let newName = num + '-' +name;
fs.renameSync(`./code/${item}`,`./code/${newName}`);
});
```

## 删除后恢复序号 
![image](https://github.com/sophiaGWW/computer-Learning-Notes/blob/master/attachment/Pasted%20image%2020230803131150.png)


例：原序号01,02,03,04，删除文件02后，序号变为01，02，03
```js
files.forEach(item =>{
    count++;
  let num = item.slice(1,2);
  console.log(num);
  if(count == num){
    return;
  }
  const data = item.split('-');
  let[num0,name]=data;
  num = num-1;
  let newName = '0'+num+'-'+name;
  fs.renameSync(`./code/${item}`,`./code/${newName}`);

})```
